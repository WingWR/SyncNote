spring:
  profiles:
    active: dev
  application:
    name: syncnote-boot
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: remote_user
    password: Software007@
    url: jdbc:mysql://139.196.151.22:3306/sync_note

  data:
    redis:
      host: 139.196.151.22
      port: 6379
      password: Software007@
      database: 0
      connect-timeout: 5000
      timeout: 2000
  sql:
    init:
      mode: always
      schema-locations: classpath:schema.sql
      data-locations: classpath:data.sql
    # 如果使用的是 Spring Boot 3.x，建议增加以下配置以确保初始化顺序
    jpa:
      defer-datasource-initialization: false

# 默认配置（可被profile特定配置覆盖）
storage:
  minio:
    endpoint: ${MINIO_ENDPOINT:http://139.196.151.22:9000}
    accessKey: ${MINIO_ACCESS_KEY:admin}
    secretKey: ${MINIO_SECRET_KEY:admin123}
    bucket: ${MINIO_BUCKET:syncnote-documents}

jwt:
  # Token 密钥（请替换为生产环境的安全随机字符串）
  secret-key: "dsaiuohdsafbdsjkfd23762163jifbd2"

  # Token 持续时间（毫秒），默认 12 小时
  expiration-ms: 43200000

  # Redis 中存储 token 的前缀
  redis-prefix: "TOKEN:"

logging:
  level:
    root: INFO
    # 打开对 JWT 解析和过滤器的详细日志，便于排查 403/认证问题
    com.syncnote.syncnoteboot.filter.JwtRequestFilter: DEBUG
    com.syncnote.util.JWT: DEBUG
    org.springframework.security: DEBUG
    # 打开mapper 日志 查看 查询逻辑
    #com.syncnote.document.mapper: DEBUG
